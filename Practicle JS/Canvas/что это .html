<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <title>Графика</title>
    <style>
      canvas {
        margin: 0px auto;
        border: 1px solid black;
        display: block;
      }
    </style>
  </head>
  <body>
    <canvas tabindex = '1' width="800" height="400"></canvas>
    <script>
      const canvas = document.querySelector('canvas');
      const ctx = canvas.getContext('2d');
      const [width, height] = [canvas.width, canvas.height];

      let x = Math.floor(Math.random() * (width - 50));
      let y = Math.floor(Math.random() * (height - 50));
      let speedX = Math.random() - 0.5 < 0 ? -3 : 3;
      let speedY = Math.random() - 0.5 < 0 ? -3 : 3;

        /*Code for the down_Rect */
      let px = width / 2 - 75;  /*centered the down_Rect */
      let [movingLeft, movingRight] = [false, false];

    /*  const images = [    для чего  ?
      ].map((file) => {
        const img = new Image();
        img.src = 'images/' + file;
        return image;
      });*/

      const keys = {
        LEFT: 37,
        RIGHT: 39,
      };
      const speed = 10;
      let left_right = 0;

      const update = () => {
      left_right += movingLeft ? -speed : movingRight ? speed : 0;
      };
      const draw = () => {
        ctx.clearRect(0, 0, width, height);
        ctx.fillStyle = 'blue';
        ctx.fillRect(px, height - 50, 150, 50);
      };
      const keyPressed = (e) => {
        e.preventDefault();
        e.stopPropagation();
        switch(e.keyCode) {
          case keys.LEFT: movingLeft = true; break;
          case keys.RIGHT: movingRight = true;
        }
      };
      const keyReleased = (e) => {
        e.preventDefault();
        e.stopPropagation();
        switch(e.keyCode) {
          case keys.LEFT: movingLeft = false; break;
          case keys.RIGHT: movingRight = false;
        }
      };

      setInterval(update, 25);
      setInterval(draw, 25);
      canvas.onkeydown = keyPressed;
      canvas.onkeyup = keyReleased;

      /*Code for the Rect pushing from borders*/
      setInterval(() => {
        ctx.clearRect(0, 0, width, height);
        ctx.fillRect(x, y, 50, 50);

        x += speedX;
        if (x < 0 || x > width - 50) {
          speedX = -speedX;
        }
        y += speedY;
        if (speedY > 0 && y > height - 50 && x > px - 50 && x < px + 200 || speedY < 0 && y < 0) {
          speedY = -speedY;
        }
      }, 25);
    </script>
  </body>
